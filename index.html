<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Literatura espa√±ola hasta el siglo XVIII</title>
  <style>
    :root{ --fg:#1f2937; --bg:#ffffff; --border:#e5e7eb; --brand:#111827;
           --medieval:#fef3c7; --rena:#dcfce7; --cerv:#e5e7eb; --barroco:#fae8ff; --ilustra:#dbeafe; --card:#ffffff; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial}
    a{color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    /* Para que los anclajes no queden ocultos bajo la barra */
    :target{scroll-margin-top:72px}

    /* NAV */
    .nav{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.96);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--border)}
    .nav .inner{display:flex;gap:.5rem;align-items:center}
    .brand{font-weight:800}
    .spacer{flex:1}
    .links{display:flex;gap:.5rem;align-items:center}
    .links a{display:inline-block;padding:.5rem .75rem;border:1px solid var(--border);border-radius:9999px;text-decoration:none;background:#fff;white-space:nowrap}
    .hamb{display:none;appearance:none;border:1px solid var(--border);background:#fff;border-radius:.75rem;padding:.5rem .6rem}
    .mobile-panel{display:none;position:fixed;top:56px;left:0;right:0;background:#fff;border-bottom:1px solid var(--border);box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .mobile-panel .row{display:flex;overflow-x:auto;gap:.5rem;padding:.75rem 1rem}
    .mobile-panel a{display:inline-block;padding:.5rem .75rem;border:1px solid var(--border);border-radius:9999px;background:#fff;text-decoration:none;white-space:nowrap}

    /* Layout */
    .section{padding:3rem 0}
    .card{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:1rem}
    .grid{display:grid;gap:1rem}
    @media(min-width:900px){.grid-3{grid-template-columns: 1fr 1fr 1fr;}}
    h1{font-size:clamp(1.8rem,2.5vw,3rem);margin:.3rem 0}
    h2{font-size:clamp(1.5rem,2vw,2.2rem);margin:0 0 .5rem 0}
    h3{margin:.5rem 0}
    .muted{color:#6b7280;font-size:.95rem}
    .btn{display:inline-block;padding:.6rem 1rem;border-radius:9999px;border:1px solid var(--border);background:#fff;text-decoration:none;cursor:pointer}
    .btn.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .list{padding-left:1.1rem}
    .list li{margin:.35rem 0}
    .footer{border-top:1px solid var(--border);padding:1rem 0;color:#6b7280}
    .chip{display:inline-block;padding:.25rem .6rem;border:1px solid var(--border);border-radius:9999px;margin:.15rem .25rem;background:#fff;cursor:pointer}
    .chip.active{background:#111827;color:#fff;border-color:#111827}
    .hint{font-size:.9rem;color:#334155;margin:.25rem 0 .5rem}

    /* Section backgrounds */
    #edad-media{background:var(--medieval)}
    #renacimiento{background:var(--rena)}
    #cervantes{background:var(--cerv)}
    #barroco{background:var(--barroco)}
    #ilustracion{background:var(--ilustra)}

    /* Table */
    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid var(--border);padding:.6rem;text-align:left}
    th{background:#f8fafc}

    /* Inputs */
    input, textarea, select{width:100%;padding:.6rem;border:1px solid var(--border);border-radius:.6rem}
    textarea{min-height:160px}

    /* Responsive */
    @media (max-width: 899px){ .links{display:none} .hamb{display:inline-block} .container{padding:.75rem 1rem} .section{padding:2rem 0} }
    .nav.open .mobile-panel{display:block}

    /* ===== Visor PDF modal ===== */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;z-index:50}
    .overlay.show{display:block}
    .viewer{position:fixed;inset:5% 3%;background:#111827;border-radius:1rem;box-shadow:0 25px 50px rgba(0,0,0,.35);display:none;flex-direction:column;z-index:60}
    .viewer .top{display:flex;align-items:center;gap:.5rem;padding:.6rem .75rem;background:#0f172a;color:#fff;border-top-left-radius:1rem;border-top-right-radius:1rem;flex-wrap:wrap}
    .viewer .top .spacer{flex:1}
    .viewer .btn{border-color:#334155;background:#fff;color:#0f172a;font-weight:600;padding:.45rem .8rem;border-radius:.65rem;text-decoration:none;display:inline-flex;align-items:center;gap:.4rem}
    .viewer iframe{flex:1;border:0;border-bottom-left-radius:1rem;border-bottom-right-radius:1rem;background:#fff}
    @media (max-width: 640px){ .viewer{inset:4% 2%} .viewer .btn{flex:1;justify-content:center;min-width:120px} #fileName{flex-basis:100%;font-size:1rem} }
    /* ===== FONDOS DE √âPOCA ===== */

/* Tarjetas m√°s legibles sobre fondo */
.card {
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid var(--border);
  border-radius: 1rem;
  padding: 1rem;
}

/* Imagen de fondo por secci√≥n */
#edad-media {
  background:
    linear-gradient(to bottom, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)),
    url("materials/img/edad-media.jpg") center/cover no-repeat;
}
#renacimiento {
  background:
    linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),
    url("materials/img/renacimiento.jpg") center/cover no-repeat;
}
#cervantes {
  background:
    linear-gradient(to bottom, rgba(0, 0, 0, 0.18), rgba(0, 0, 0, 0.18)),
    url("materials/img/cervantes.jpg") center/cover no-repeat;
}
#barroco {
  background:
    linear-gradient(to bottom, rgba(0, 0, 0, 0.22), rgba(0, 0, 0, 0.22)),
    url("materials/img/barroco.jpg") center/cover no-repeat;
}
#ilustracion {
  background:
    linear-gradient(to bottom, rgba(0, 0, 0, 0.16), rgba(0, 0, 0, 0.16)),
    url("materials/img/ilustracion.jpg") center/cover no-repeat;
}

/* En m√≥vil, m√°s opaco para texto legible */
@media (max-width: 899px) {
  .card {
    background: rgba(255, 255, 255, 0.96);
  }
}
  </style>
</head>
<body>
  <!-- NAV -->
  <div class="nav" id="nav">
    <div class="container inner">
      <div class="brand">üìö Lit. espa√±ola ‚ü∂ s. XVIII</div>
      <div class="spacer"></div>
      <div class="links" aria-label="Men√∫ principal">
        <a href="#edad-media">Edad Media</a>
        <a href="#renacimiento">Renacimiento</a>
        <a href="#cervantes">Cervantes</a>
        <a href="#barroco">Barroco</a>
        <a href="#ilustracion">Ilustraci√≥n</a>
        <a href="#descargas">Descargas</a>
        <a href="#foro">Foro</a>
        <a href="#miniserie">Miniserie</a>
      </div>
      <button class="hamb" id="hamb" aria-label="Abrir men√∫">‚ò∞</button>
    </div>
    <div class="mobile-panel" id="mobilePanel">
      <div class="row">
        <a href="#edad-media">Edad Media</a>
        <a href="#renacimiento">Renacimiento</a>
        <a href="#cervantes">Cervantes</a>
        <a href="#barroco">Barroco</a>
        <a href="#ilustracion">Ilustraci√≥n</a>
        <a href="#descargas">Descargas</a>
        <a href="#foro">Foro</a>
        <a href="#miniserie">Miniserie</a>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <section class="section" id="home">
    <div class="container">
      <h1>Literatura espa√±ola hasta el siglo XVIII</h1>
      <p class="muted">Cinco √©pocas, materiales y <b>cuadernos</b>. En m√≥vil, los PDF se abren dentro de la web con bot√≥n <b>Volver</b>.</p>
    </div>
  </section>

  <!-- ===== EDAD MEDIA ===== -->
  <section class="section" id="edad-media">
    <div class="container">
      <h2>üõ°Ô∏è Edad Media</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>Materiales completos</h3>
          <ul class="list">
            <li><button class="btn" data-pdf="materials/1. Edad Media.pdf">‚¨áÔ∏è Unidad 1. La literatura en la Edad Media (PDF)</button></li>
          </ul>
        </div>
        <div class="card">
          <h3>Contexto hist√≥rico y claves</h3>
          <ul class="list">
            <li><b>Obra/autor/√©poca:</b> Cantar de Mio Cid; an√≥nimo; s. XII‚ÄìXIII</li>
            <li><b>3 ideas literarias:</b> H√©roe y honra ¬∑ Realismo y exilio ¬∑ Oralidad</li>
            <li><b>3 claves del contexto:</b> Vasallaje ¬∑ Teocentrismo ¬∑ Frontera feudal</li>
            <li><b>Comparador:</b> Cid (sujeto feudal) ‚Üî Quijote (sujeto moderno)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cuadernos de la sesi√≥n</h3>
          <p class="hint">Pulsa la sesi√≥n para abrir el cuaderno. En el visor puedes <b>descargar</b> o <b>abrir en pesta√±a</b>.</p>
          <div id="chips-edad-media"></div>
          <ul class="list" id="lista-edad-media"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== RENACIMIENTO ===== -->
  <section class="section" id="renacimiento">
    <div class="container">
      <h2>üèõÔ∏è Renacimiento</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>Materiales completos</h3>
          <ul class="list">
            <li><button class="btn" data-pdf="materials/2. Renacimiento.pdf">‚¨áÔ∏è Unidad 2. Renacimiento (PDF)</button></li>
          </ul>
        </div>
        <div class="card">
          <h3>Contexto hist√≥rico y claves</h3>
          <ul class="list">
            <li><b>Obra/autor/√©poca:</b> Garcilaso de la Vega; s. XVI</li>
            <li><b>3 ideas literarias:</b> Soneto/√©gloga/lira ¬∑ Naturaleza ideal ¬∑ Amor-conocimiento</li>
            <li><b>3 claves del contexto:</b> Humanismo ¬∑ Antropocentrismo ¬∑ Corte imperial</li>
            <li><b>Comparador:</b> Garcilaso (armon√≠a) ‚Üî Barroco (contraste)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cuadernos de la sesi√≥n</h3>
          <p class="hint">Pulsa la sesi√≥n para abrir.</p>
          <div id="chips-renacimiento"></div>
          <ul class="list" id="lista-renacimiento"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CERVANTES ===== -->
  <section class="section" id="cervantes">
    <div class="container">
      <h2>ü™∂ Cervantes</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>Materiales completos</h3>
          <ul class="list">
            <li><button class="btn" data-pdf="materials/3. Cervantes.pdf">‚¨áÔ∏è Unidad 3. Cervantes (PDF)</button></li>
          </ul>
        </div>
        <div class="card">
          <h3>Contexto hist√≥rico y claves</h3>
          <ul class="list">
            <li><b>Obra/autor/√©poca:</b> Miguel de Cervantes; s. XVI‚ÄìXVII</li>
            <li><b>3 ideas literarias:</b> Perspectivismo ¬∑ Hibridaci√≥n ¬∑ Verosimilitud</li>
            <li><b>3 claves del contexto:</b> Sujeto moderno ¬∑ Imprenta y mercado ¬∑ Contradicciones</li>
            <li><b>Comparador:</b> Quijote (imprenta) ‚Üî Cid (canto oral)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cuadernos de la sesi√≥n</h3>
          <p class="hint">(Pronto) A√±ade los cuadernos de Cervantes cuando los subas.</p>
          <div id="chips-cervantes"></div>
          <ul class="list" id="lista-cervantes"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== BARROCO ===== -->
  <section class="section" id="barroco">
    <div class="container">
      <h2>üé≠ Barroco</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>Materiales completos</h3>
          <ul class="list">
            <li><button class="btn" data-pdf="materials/4. Barroco.pdf">‚¨áÔ∏è Unidad 4. Barroco (PDF)</button></li>
          </ul>
        </div>
        <div class="card">
          <h3>Contexto hist√≥rico y claves</h3>
          <ul class="list">
            <li><b>Autores:</b> Lope, Calder√≥n</li>
            <li><b>3 ideas literarias:</b> Mezcla tr√°gico-c√≥mico ¬∑ Hip√©rbaton/conceptismo ¬∑ Honor/apariencia</li>
            <li><b>3 claves del contexto:</b> Crisis ¬∑ Absolutismo ¬∑ Teatro como industria</li>
            <li><b>Comparador:</b> Barroco (exceso) ‚Üî Ilustraci√≥n (claridad)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cuadernos de la sesi√≥n</h3>
          <p class="hint">(Pronto) A√±ade los cuadernos del Barroco cuando los tengas.</p>
          <div id="chips-barroco"></div>
          <ul class="list" id="lista-barroco"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== ILUSTRACI√ìN ===== -->
  <section class="section" id="ilustracion">
    <div class="container">
      <h2>üí° Ilustraci√≥n</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>Materiales completos</h3>
          <ul class="list">
            <li><button class="btn" data-pdf="materials/5. Ilustracion.pdf">‚¨áÔ∏è Unidad 5. Ilustraci√≥n (PDF)</button></li>
          </ul>
        </div>
        <div class="card">
          <h3>Contexto hist√≥rico y claves</h3>
          <ul class="list">
            <li><b>Autor:</b> Morat√≠n</li>
            <li><b>3 ideas literarias:</b> Reglas cl√°sicas ¬∑ Didactismo ¬∑ Lenguaje claro</li>
            <li><b>3 claves del contexto:</b> Racionalismo ¬∑ Reformismo ¬∑ Tradici√≥n vs. cambio</li>
            <li><b>Comparador:</b> Morat√≠n (raz√≥n p√∫blica) tras el Barroco</li>
          </ul>
        </div>
        <div class="card">
          <h3>Cuadernos de la sesi√≥n</h3>
          <p class="hint">(Pronto) A√±ade los cuadernos de Ilustraci√≥n cuando los tengas.</p>
          <div id="chips-ilustracion"></div>
          <ul class="list" id="lista-ilustracion"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- DESCARGAS -->
  <section class="section" id="descargas">
    <div class="container">
      <h2>üì• Descargas</h2>
      <div class="card">
        <table>
          <thead><tr><th>Documento</th><th>Acci√≥n</th></tr></thead>
          <tbody>
            <tr><td>Syllabus del curso</td><td><button class="btn" data-pdf="materials/syllabus.pdf">Abrir/descargar</button></td></tr>
            <tr><td>Programa detallado sesi√≥n a sesi√≥n</td><td><button class="btn" data-pdf="materials/programa-detallado.pdf">Abrir/descargar</button></td></tr>
            <tr><td>Cuaderno de actividades (general)</td><td><button class="btn" data-pdf="materials/cuadernos/Modulo1_Literatura_Medieval.pdf">Abrir/descargar</button></td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- FORO -->
  <section class="section" id="foro">
    <div class="container">
      <h2>üí¨ Foro</h2>
      <div class="card">
        <p>Usaremos el foro de la plataforma del centro para usuarios y notificaciones.</p>
        <p><a class="btn primary" href="https://clasesporzoom.com" target="_blank" rel="noreferrer">Abrir foro del curso</a></p>
      </div>
    </div>
  </section>

  <!-- MINISERIE -->
  <section class="section" id="miniserie">
    <div class="container">
      <h2>üé¨ Miniserie del curso</h2>
      <div class="card">
        <div class="grid" style="grid-template-columns:1fr;gap:1rem">
          <label>Obra
            <select id="obra">
              <option>Quijote</option>
              <option>Lazarillo</option>
            </select>
          </label>
          <label>T√≠tulo del cap√≠tulo
            <input id="titulo" placeholder="Ej.: El sue√±o de los molinos" />
          </label>
          <label>Sinopsis breve
            <input id="sinopsis" placeholder="Una l√≠nea que resuma la escena" />
          </label>
          <label>Guion (puedes escribir o modificar la plantilla)
            <textarea id="guion"></textarea>
          </label>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap">
            <button class="btn primary" id="guardar">Descargar .txt</button>
            <button class="btn" id="plantilla">Cargar plantilla</button>
            <button class="btn" id="limpiar">Limpiar</button>
          </div>
        </div>
        <p class="muted" style="margin-top:.75rem">La descarga funciona sin servidor: genera un archivo de texto al momento.</p>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">¬© <span id="y"></span> Curso: Literatura espa√±ola hasta el siglo XVIII ¬∑ Sitio simple (HTML+CSS+JS)</div>
  </footer>

  <!-- ===== Visor PDF dentro de la web ===== -->
  <div class="overlay" id="overlay"></div>
  <div class="viewer" id="viewer">
    <div class="top">
      <strong id="fileName">Documento</strong>
      <div class="spacer"></div>
      <a class="btn" id="openTab" target="_blank" rel="noopener">Abrir en pesta√±a</a>
      <a class="btn" id="download" download>Descargar</a>
      <button class="btn primary" id="closeViewer">Volver</button>
    </div>
    <iframe id="frame" title="Visor PDF" src="about:blank"></iframe>
  </div>

  <script>
    // A√±o
    document.getElementById('y').textContent = new Date().getFullYear();

    // Men√∫ m√≥vil
    const nav = document.getElementById('nav');
    const hamb = document.getElementById('hamb');
    hamb?.addEventListener('click', ()=> nav.classList.toggle('open'));
    document.querySelectorAll('#mobilePanel a').forEach(a=> a.addEventListener('click', ()=> nav.classList.remove('open')));

    // ====== Visor PDF ======
    const overlay = document.getElementById('overlay');
    const viewer = document.getElementById('viewer');
    const frame = document.getElementById('frame');
    const openTab = document.getElementById('openTab');
    const download = document.getElementById('download');
    const fileName = document.getElementById('fileName');
    const closeViewer = document.getElementById('closeViewer');

    function openPDF(path){
      fileName.textContent = decodeURIComponent(path.split('/').pop());
      frame.src = path;
      openTab.href = path;
      download.href = path;
      overlay.classList.add('show');
      viewer.style.display = 'flex';
      document.body.style.overflow='hidden';
    }
    function closePDF(){
      overlay.classList.remove('show');
      viewer.style.display = 'none';
      frame.src = 'about:blank';
      document.body.style.overflow='';
    }
    overlay.addEventListener('click', closePDF);
    closeViewer.addEventListener('click', closePDF);

    // Cualquier bot√≥n/enlace con data-pdf abre el visor
    document.addEventListener('click', (e)=>{
      const target = e.target.closest('[data-pdf]');
      if(target){
        e.preventDefault();
        const path = target.getAttribute('data-pdf');
        openPDF(path);
      }
    });

    // ====== Cuadernos (chips) ======
    const CUADERNOS = {
      'Edad Media': {
        sesiones: [
          { t: 'Sesi√≥n 1 ¬∑ Literatura Medieval', href: 'materials/cuadernos/Sesion1_Literatura_Medieval.pdf' },
          { t: 'Sesi√≥n 2 ¬∑ L√≠rica Medieval', href: 'materials/cuadernos/Sesion2_Lirica_Medieval.pdf' },
          { t: 'Sesi√≥n 3 ¬∑ Cantar de Mio Cid', href: 'materials/cuadernos/Sesion3_Cantar_de_Mio_Cid.pdf' },
          { t: 'Sesi√≥n 4 ¬∑ Cid vs. L√°zaro', href: 'materials/cuadernos/Sesion4_Cid_vs_Lazaro.pdf' },
          { t: 'Sesi√≥n 5 ¬∑ Berceo', href: 'materials/cuadernos/Sesion5_Berceo.pdf' },
          { t: 'Sesi√≥n 6 ¬∑ Arcipreste', href: 'materials/cuadernos/Sesion6_Arcipreste.pdf' },
        ]
      },
      'Renacimiento': {
        sesiones: [
          { t: 'Sesi√≥n 7 ¬∑ Renacimiento', href: 'materials/cuadernos/Sesion7_Renacimiento.pdf' },
          { t: 'Sesi√≥n 8 ¬∑ Garcilaso', href: 'materials/cuadernos/Sesion8_Garcilaso.pdf' },
          { t: 'Sesi√≥n 9 ¬∑ Fray Luis & San Juan', href: 'materials/cuadernos/Sesion9_FrayLuis_SanJuan.pdf' },
        ]
      }
    };

    function renderCuadernos(epoca, chipsId, listId){
      const data = CUADERNOS[epoca] || { sesiones: [] };
      const chips = document.getElementById(chipsId);
      const list = document.getElementById(listId);
      if(!chips || !list) return;
      chips.innerHTML = '';
      data.sesiones.forEach((s)=>{
        const span = document.createElement('span');
        span.className = 'chip'; span.textContent = s.t;
        span.onclick = ()=>{
          document.querySelectorAll('#'+chipsId+' .chip').forEach(c=>c.classList.remove('active'));
          span.classList.add('active');
          list.innerHTML = `<li><button class="btn primary" data-pdf="${s.href}">‚¨áÔ∏è Abrir/descargar (${s.t})</button></li>`;
        };
        chips.appendChild(span);
      });
      if(data.sesiones[0]) setTimeout(()=> chips.querySelector('.chip')?.click(), 0);
      else list.innerHTML = '<li class="muted">No hay cuadernos todav√≠a.</li>';
    }

    renderCuadernos('Edad Media','chips-edad-media','lista-edad-media');
    renderCuadernos('Renacimiento','chips-renacimiento','lista-renacimiento');

    // Miniserie: plantilla y descarga
    const plantilla = (obra) => `# ${obra} ‚Äî Guion breve (B1)\n\nT√≠tulo de la escena:\nLugar y √©poca: _______________\nPersonajes: [Nombre (√©poca/estamento), Objetivo, Obst√°culo, Visi√≥n]\n\n[ACOTACI√ìN] (ambientaci√≥n, vestuario, luz)\n\nDI√ÅLOGO (m√°x. 2-3 p√°ginas)\n- Personaje A: (frase de intenci√≥n)\n- Personaje B: (respuesta)\n\n[Lectura cr√≠tica]\n- ¬øQu√© mirada del mundo aparece?\n- ¬øQu√© contradicciones muestra el texto?\n- ¬øQu√© rasgos sociales del momento aflora?\n\n[PERFORMATIVO]\n- Pausas y √©nfasis si es recital.\n- Entrada/salida si es teatro.\n`;
    const obra = document.getElementById('obra');
    const titulo = document.getElementById('titulo');
    const sinopsis = document.getElementById('sinopsis');
    const guion = document.getElementById('guion');
    document.getElementById('plantilla')?.addEventListener('click', ()=> guion.value = plantilla(obra.value));
    document.getElementById('limpiar')?.addEventListener('click', ()=> { titulo.value=''; sinopsis.value=''; guion.value=''; });
    document.getElementById('guardar')?.addEventListener('click', ()=>{
      const name = `${obra.value}-${(titulo.value||'capitulo').replace(/\s+/g,'_')}.txt`;
      const content = guion.value || plantilla(obra.value);
      const blob = new Blob([content], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download=name; document.body.appendChild(a); a.click();
      setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 0);
    });
  </script>
</body>
</html>
